<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.webix.com/edge/webix.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css" rel="stylesheet"
        type="text/css">
    <link rel="stylesheet" href="/static/custom.css">
    <script src="https://cdn.webix.com/edge/webix.js" type="text/javascript"></script>
    <title>{{title}}</title>
</head>

<body>
    <script>
        var updateRole = false;
        webix.ready(function () {
            webix.ui({
                type: "clean",
                rows: [{
                    view: "toolbar",
                    height: 65,
                    padding: 10,
                    elements: [{
                        view: "label",
                        label: "",
                        css: "logo",
                        width: 175,
                        height: 50,
                        type: "webix_secondary",
                        click: function () {
                            window.location.href = "/";
                        }
                    },
                    {
                        width: 1250
                    },
                    {
                        view: "label",
                        width: 150,
                        label: "Hello! {{name}}",
                        autowidth: true
                    },
                    {
                        view: "label",
                        width: 100,
                        label: "As {{role}}",
                        labelWidth: "auto"
                    },
                    {
                        view: "button",
                        width: 130,
                        label: " Logout",
                        click: function () {
                            window.location.href = '/users/logout';
                        }
                    },
                    {}

                    ]
                },
                {
                    cols: [{
                        view: "sidebar",
                        id: "mainSidebar",
                        css: "sidebar-bg",
                        collapsed: true,
                        width: 250,
                        value: "dashboard",
                        data: [{
                            id: "dashboard",
                            icon: "mdi mdi-home",
                            value: "Dashboard"
                        },
                        {
                            id: "supplyAndRetailManagement",
                            icon: "mdi mdi-city",
                            value: "Supply and Retail Management",
                        },

                        // {% if Perm['stock management'] %}
                        {
                            id: "product_management",
                            icon: "mdi mdi-archive",
                            value: "Products management"
                        },
                        // {% endif %}
                        // {% if Perm['account management'] %}
                        {
                            id: "users_management",
                            icon: "mdi mdi-account-supervisor",
                            value: "Users management"
                        },
                            // {% endif %}
                        ]
                    },
                    {
                        type: "clean",
                        paddingX: 30,
                        rows: [{
                            height: 70,
                            cols: [{
                                type: "clean",
                                template: "<H1>{{title}}</H1>",
                                width: 800,
                            },
                            {}
                            ]
                        },
                        {

                        },
                        {}
                        ]
                    }
                    ]
                },
                {
                    view: "toolbar",
                    css: "showFooter",
                    padding: 10,
                    elements: [{},
                    {},
                    {
                        view: "label",
                        label: "",
                        css: "logo",
                        width: 175,
                        height: 30,
                        type: "webix_secondary"
                    }
                    ]
                }
                ]
            });
            webix.ui.fullScreen();
            if ($$('log_form')) {
                $$('log_form').clear();
            };
            if ($$("mainSidebar")) {
                $$("mainSidebar").select("product_management");

                var sidebarRoutes = {
                    dashboard: "/",
                    users_management: "/management/users",
                    supplyAndRetailManagement: "/retail-supply"
                };
                $$("mainSidebar").attachEvent("onAfterSelect", function (id) {
                    var target = sidebarRoutes[id] || "/";
                    window.location.href = target;
                    return true;
                });
            };
        })
    </script>
</body>

</html>